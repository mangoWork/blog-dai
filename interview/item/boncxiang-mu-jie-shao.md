## 根据现有的数据生成词库

### 1. 提取现有的标签数据

##### 原有数据展现

&nbsp;　现有的标签数据的格式如下所示（还包括了运动健身、美食、旅游景点等）：

```
0303101 购物 商铺 服装鞋帽皮具店
0303102    购物 商铺 化妆品店
0303103    购物 商铺 文化用品店
0303104    购物 商铺 专卖店
0304000    购物 超市 
0305000    购物 便利店    
0306000    购物 家居建材   
0307000    购物 家电数码   
0308000    购物 商业街    
0401000    生活服务   通讯营业厅  
0401101    生活服务   通讯营业厅  中国联通营业厅
0401102    生活服务   通讯营业厅  中国电信营业厅
0401103    生活服务   通讯营业厅  中国移动营业厅
0402000    生活服务   售票处    
0402101    生活服务   售票处    飞机票代售点
0402102    生活服务   售票处    火车票代售点
0402103    生活服务   售票处    长途汽车票代售点
0402104    生活服务   售票处    船票代售点
.......
```

##### 实现方式

1. 利用线程安全的单例模式来读取标签文件；读取标签文件中的数据并且存放在Map中，key存放的数据为一级分类\(如：生活服务\)，value为二级分类和三级分类

### 2. 对每个分类提取1000条数据【数据中包含了信息的分类】

1. 读取文件，将文件中的POI数据转换为List
2. 遍历POI数据；找出POI数据对应的一级分类\(部分数据分类信息不全，有些可能存在二级分类不存在一级分类\)，如果没有对应的一级分类，则舍弃该数据，如果存在一级分类，将数据存放在Map中，key为一级分类，value为该一级分类的集合；遍历直到每个分类中的数据都满足1000条数据的时候，则停止遍历。

### 3.  对数据进行分词

1. 在搜狗词库中下载对应的商铺词库作为IK分词的扩展次
2. 利用IK分词对其中的单词进行分词\(配置好对应的停止词，扩展词语\)，统计所有词的词频，筛选出词频大于4并且词的长度大于2的单词，\(按照分类进行存储的，每个分类中的词频以及单词的长度\)

### 4. 计算信息增益

### 5. 根据信息增益对结果进行排序

&nbsp;　输出信息增益较小的数据

## AOI和POI爬虫数据去重

### 项目需求

&nbsp;　将从高德和百度中爬取得数据进行去重，同一个地方在高德中爬取出来的数据可能跟百度中的数据名称是不一致，这时候就需要将同一个地方的百度中的数据和高德中的数据进行合并。

### 合并的步骤

#### 1. 将AOI以及POI的数据存放在Solr中

&nbsp;　读取AOI以及POI的高德数据，并为每条数据标记数据类型\(高德\)

&nbsp;　向Solr中提交数据(提交数据的过程中不是每条数据提交一次，而是多条数据提交一次)

#### 2. POI数据的合并

##### 2.1 读取POI的百度文件数据并且查询出Solr中相似的数据

&nbsp;　读取POI的百度数据(用于查询出来对应solr中相似的数据)

&nbsp;　利用多线程的Mater-worker模式，当读取出文件中的一条数据的时候，就向Solr中查询出来相似的数据(查询的时候会把POI中的数据限制在一定的范围之内,如距离相差500以内的结果；Solr中也会使用对应的扩展词、以及分词生成的停止词等)

##### 2.2 计算该数据与查询出来的数据的相似度

&nbsp;　利用IK分词，将数据中的name、adress、tag进行分词，根据配置中的name、address、tag所占的权重来获取该数据总的相似度

&nbsp;　获取查询出来的满足name、address、tag的最小相似度的数据以及满足根据权重计算出来的总的相似度。在筛选出来的数据中获取到总的相似度最高的一条数据。

##### 2.3 数据的合并

&nbsp;　将数据进行合并，根据高德数据进行合并，合并的数据后面标记百度数据对应的ID以及对应的相似度。

#### 3. AOI数据的合并

##### 3.1 读取AOI的百度文件数据并且查询出Solr中相似的数据

&nbsp;　读取AOI的百度数据(用于查询出来对应solr中相似的数据)

&nbsp;　利用多线程的Mater-worker模式，当读取出文件中的一条数据的时候，就向Solr中查询出来相似的数据

















