### zookeeper的问题解答



#### 什么是集群脑裂？

&nbsp;　　集群的脑裂通常是发生在节点之间通信不可达的情况下，集群会分裂成不同的小集群，小集群各自选出自己的master节点，导致原有的集群出现多个master节点的情况，这就是脑裂

---------------------

#### 为什么zookeeper有5个节点，至少要3个节点正常？



--------------

#### 为什么Zookeeper一般安装为奇数个节点？

&nbsp;　1. 防止由脑裂造成的集群不可用。

&nbsp;　　在节点数量是奇数个的情况下， zookeeper集群总能对外提供服务（即使损失了一部分节点）；如果节点数量是偶数个，会存在zookeeper集群不能用的可能性（脑裂成两个均等的子集群的时候）。

&nbsp;　2. 容错能力相同的情况下，奇数台更节省资源。

&nbsp;　　leader选举要求的可用节点数量 > 总节点数量/2；其中三个节点只允许一个节点宕机，四个节点也是只允许一个节点宕机；也就是说三个节点和四个节点的容错能力都是相同的，但是三个节点更节省资源。

---------------------



#### Zookeeper节点必须为奇数吗？为什么？

&nbsp;　　答：不一定非得需要奇数，只需要满足可用节点数量 > 总节点数量/2就可以了，但是偶数节点的系统更加的脆弱。假设在集合中使用4个服务器， 那么多数原则对应的数量为3个服务器。 然而， 这个系统仅能容许1个服务器崩溃， 因为两个服务器崩溃就会导致系统失去多数原则的状态。 因此，在4个服务器的情况下， 我们仅能容许一个节点崩溃， 而法定人数现在却更大， 这意味着对每个请求， 我们需要更多的确认操作。

--------------------

#### Zookeeper的znode的类型



